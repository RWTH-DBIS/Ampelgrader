# Use an official Node.js runtime as a parent image
FROM node:14

# Set the working directory
WORKDIR /usr/src/app

# Copy the current directory contents into the container at /usr/src/app
COPY landing_page/ .

# Install dependencies
RUN npm install

# Install kubectl 
RUN curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
RUN chmod +x ./kubectl
RUN mv ./kubectl /usr/local/bin
RUN apt-get update && apt-get install -y jq

# RUN chmod +x src/retrieve_services.sh

# Make port 3000 available to the world outside this container
EXPOSE 3000

# Run the server when the container launches
CMD ["node", "index.js"]