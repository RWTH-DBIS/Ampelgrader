<!-- templates/_navbar.html -->
{% load i18n %}
{% load static %}
{% get_current_language as LANGUAGE_CODE %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
    <head>
        <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>{% translate "Übung Übersicht" %}</title>
		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="{% static 'grader/styles.css' %}">
    </head>
    <body>
        <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
            <a href="/grader/request/" class="navbar-brand">{% translate "Ampel"%}-Grader</a>
                    {% if user.is_authenticated %}
                <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="margin-right: 49px;">
                <li class="nav-item">
                    {% translate "eingeloggt als" %}: <span style="color:rgba(111, 111, 132, 0.855)">{{ user.email }}</span>
                </li>
                </ul>
                <div class="d-flex align-items-center" style="gap: 10px;">
                    {% if id %}
                    <a href="{%url 'grading_results' id%}" class="btn btn-primary">{% translate "Letzte Einreichung" %}</a>
                    {% endif %}
                    <form action="{% url 'oidc_logout' %}" method="post">
                    {% csrf_token %}
                    <input type="submit" value="Logout">
                    </form>
                </div>
                {% endif %}
            </div>
        </nav>
        {% block content %}

        {% endblock %}   
                    
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>     
        <script>
            $(document).on('click', '#reloadButton', function(){
    
            var element_id = $(this);
    
            $(element_id).attr('disabled', 'disabled');
            $(element_id).html('Loading...');
            
    
            setTimeout(function(){
                $(element_id).removeAttr('disabled');
                location.reload();
                $(element_id).html('Reload');
            }, 2000); 
            
            });
        </script>
    </body>
</html>